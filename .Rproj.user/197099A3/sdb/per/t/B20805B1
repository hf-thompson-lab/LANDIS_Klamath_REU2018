{
    "collab_server" : "",
    "contents" : "library(ggpubr)\nlibrary(ggplot2)\nlibrary(reshape2)\nlibrary(raster)\nlibrary(scales)\n\n#set up \nscenarioPath <-\"C:/Users/hfintern/Desktop/sa3_10YTS\"\n\nsims <- list.dirs(scenarioPath, recursive = F, full.names = F)\nsims<- sims[!grepl(\"Graphs\",sims)]\n\nsimus.selection <- sims \ngeneral.root.path <- scenarioPath\ncommon.names <- c(\"A2 Climate\",\"A2 Climate & LU\",\"Recent Trends\",\"Recent Trends & LU\")#the order has to match the order of the simus.selection\n\ntimesteps <- 1:9 * 10 \ntimesteps\n\n\n#read in rasters \nSeverityrasterStacks <- lapply (simus.selection, function (sim){\n  \n  setwd(general.root.path)\n  setwd(sim)\n  \n  if (length(list.files(path = './fire')) ==0) { return(NULL) }\n  ras.list <- paste0('fire/severity-',timesteps,'.img') \n  rastack  <- stack (ras.list)\n  return(rastack)\n})\n\nCutrasterStacks<- lapply (simus.selection, function (sim){\n  \n  setwd(general.root.path)\n  setwd(sim)\n  \n  if (!dir.exists(\"land-use-maps\")) { return(NULL) }\n  ras.list <- paste0('land-use-maps/land-use-',timesteps,'.img') \n  rastack  <- stack (ras.list)\n  return(rastack)\n})\n\n\n#A2 Climate gif \nsetwd(scenarioPath)\ndir.create(\"a2GIF\")\nsetwd(\"a2GIF\")\n\nbreakpoints <- c(1,10,17,25,37,45,57)\ncolors <- c(\"green\",\"grey\",\"grey\",\"brown\",\"brown\",\"red\",\"black\", \"black\")\n\narg <- list(at=c(4,16,35,52),      labels=c(\"none\",\"Fuel\\nReduction\",\"Salvage\\nlogging\",\"Fire\\nBreak\"))\narg2 <- list(at=c(0,1,2,3,4,5,6,7), labels=c(\"0   \",\"1   \\n        \",\"2      \\n       \",\"3   \\n     \"),\"4\",\"5\",\"6\",\"7\")\npng(file=\"example%02d.png\", width=1220, height=700)\nfor (i in timesteps){\n  pplts <-stack( rasterStacks[[1]][[paste0(\"severity.\",i)]], rasterStacks[[2]][[paste0(\"severity.\",i)]])\n  temp<- spplot(as(pplts, 'SpatialGridDataFrame'),\n         names.attr=c(\"A2 Climate Fire History\", \"A2 Climate & LU Fire History\"),  \n         main=list(paste(\"Fire Severity History\", i), cex=2),colorkey = list(labels = arg2))\n  par.strip.text = list(cex = 2)\n  \n  ras<-CutrasterStacks[[2]][[paste0(\"land.use.\",i)]]\n  values(ras)[values(ras)==21] <- 24\n  values(ras)[values(ras)==31] <- 34\n  values(ras)[values(ras)==155] <- 50\n  values(ras)[values(ras)==156] <- 55\n  ras2 <- ras\n  values(ras2) <-1\n  temp2<- spplot(as(stack(ras2, ras), 'SpatialGridDataFrame'),\n                names.attr=c(\"A2 Climate\",\"A2 Climate & LU Cut History\"),  \n                main=list(paste(\"Cutting History\", i), cex=2),\n                breaks=breakpoints,col=colors, axis.arg=arg, colorkey = list(labels = arg))\n  par.strip.text = list(cex = 2)\n  grid.arrange(temp, temp2, nrow=1, top = textGrob(\"A2 Climate Scenario\",gp=gpar(fontsize=20,font=3)))\n  \n}\ndev.off()\n\n\n\n#A2 Climate gif \nsetwd(scenarioPath)\ndir.create(\"NOGIF\")\nsetwd(\"NOGIF\")\n\nbreakpoints <- c(1,10,17,25,37,45,57)\ncolors <- c(\"green\",\"grey\",\"grey\",\"brown\",\"brown\",\"red\",\"black\", \"black\")\n\narg <- list(at=c(4,16,35,52),      labels=c(\"none\",\"Fuel\\nReduction\",\"Salvage\\nlogging\",\"Fire\\nBreak\"))\narg2 <- list(at=c(0,1,2,3,4,5,6,7), labels=c(\"0   \",\"1   \\n        \",\"2      \\n       \",\"3   \\n     \"),\"4\",\"5\",\"6\",\"7\")\npng(file=\"example%02d.png\", width=1220, height=700)\nfor (i in timesteps){\n  pplts <-stack( rasterStacks[[3]][[paste0(\"severity.\",i)]], rasterStacks[[4]][[paste0(\"severity.\",i)]])\n  temp<- spplot(as(pplts, 'SpatialGridDataFrame'),\n                names.attr=c(\"Recent Trends Fire History\", \"Recent Trends & LU Fire History\"),  \n                main=list(paste(\"Fire Severity History\", i), cex=2),colorkey = list(labels = arg2))\n  par.strip.text = list(cex = 2)\n  \n  ras<-CutrasterStacks[[4]][[paste0(\"land.use.\",i)]]\n  values(ras)[values(ras)==21] <- 24\n  values(ras)[values(ras)==31] <- 34\n  values(ras)[values(ras)==155] <- 50\n  values(ras)[values(ras)==156] <- 55\n  ras2 <- ras\n  values(ras2) <-1\n  temp2<- spplot(as(stack(ras2, ras), 'SpatialGridDataFrame'),\n                 names.attr=c(\"Recent Trends\",\"Recent Trends & LU Cut History\"),  \n                 main=list(paste(\"Cutting History\", i), cex=2),\n                 breaks=breakpoints,col=colors, axis.arg=arg, colorkey = list(labels = arg))\n  par.strip.text = list(cex = 2)\n  grid.arrange(temp, temp2, nrow=1, top = textGrob(\"Recent Trends Scenario\",gp=gpar(fontsize=20,font=3)))\n  \n}\ndev.off()\n",
    "created" : 1532108179094.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1466197671",
    "id" : "B20805B1",
    "lastKnownWriteTime" : 1532108106,
    "last_content_update" : 1532108106,
    "path" : "C:/Users/hfintern/Desktop/LANDIS_Klamath_REU2018/makingPicturesForGifs.R",
    "project_path" : "makingPicturesForGifs.R",
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}